<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>AI Chat Agent</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root{
  --bg:#f3f4f6;
  --card:#ffffff;
  --user:#10a37f;
  --ai:#e5e7eb;
  --text:#000;
}
.dark{
  --bg:#020617;
  --card:#020617;
  --user:#10a37f;
  --ai:#1e293b;
  --text:#fff;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system;
  background:var(--bg);
  color:var(--text);
}
.app{
  max-width:520px;
  height:100vh;
  margin:auto;
  display:flex;
  flex-direction:column;
  background:var(--card);
}
.header{
  padding:12px;
  display:flex;
  justify-content:space-between;
  align-items:center;
  background:#10a37f;
  color:#fff;
  font-weight:600;
}
.header button{
  background:none;
  border:none;
  color:#fff;
  font-size:18px;
  cursor:pointer;
}
.chat{
  flex:1;
  padding:12px;
  overflow-y:auto;
}
.msg{
  max-width:80%;
  padding:10px 12px;
  margin:8px 0;
  border-radius:12px;
  line-height:1.4;
  font-size:14px;
}
.user{
  background:var(--user);
  color:#fff;
  margin-left:auto;
}
.ai{
  background:var(--ai);
  color:var(--text);
  margin-right:auto;
}
.typing{
  font-size:12px;
  opacity:.6;
  margin:5px;
}
.input-area{
  padding:10px;
  border-top:1px solid #ccc;
}
.row{
  display:flex;
}
input{
  flex:1;
  padding:10px 14px;
  border-radius:20px;
  border:1px solid #ccc;
  outline:none;
}
.send{
  margin-left:6px;
  padding:10px 14px;
  border:none;
  border-radius:50%;
  background:#10a37f;
  color:#fff;
  font-size:16px;
}
.tools{
  display:flex;
  margin-top:6px;
}
.tools button{
  flex:1;
  margin:2px;
  padding:6px;
  border:none;
  border-radius:8px;
  font-size:12px;
  cursor:pointer;
}
</style>
</head>

<body>

<div class="app" id="app">
  <div class="header">
    <span>ü§ñ AI Assistant</span>
    <div>
      <button onclick="toggleTheme()">üåô</button>
      <button onclick="clearChat()">üóëÔ∏è</button>
    </div>
  </div>

  <div id="chat" class="chat"></div>

  <div class="input-area">
    <div class="row">
      <input id="input" placeholder="‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶¨‡¶æ English ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." />
      <button class="send" onclick="sendMessage()">‚û§</button>
    </div>
    <div class="tools">
      <button onclick="imageAI()">üñºÔ∏è Image AI</button>
      <button onclick="saveChat()">üíæ Save</button>
    </div>
  </div>
</div>

<script>
// üîë OpenRouter API key
const API_KEY = "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";
const chat = document.getElementById("chat");
const app = document.getElementById("app");

// Message display
function addMessage(text,sender){
  const m=document.createElement("div");
  m.className="msg "+sender;
  m.innerText=text;
  chat.appendChild(m);
  chat.scrollTop=chat.scrollHeight;
}

// Typing indicator
function typing(on){
  if(on){
    const t=document.createElement("div");
    t.id="typing";
    t.className="typing";
    t.innerText="AI ‡¶ö‡¶ø‡¶®‡ßç‡¶§‡¶æ ‡¶ï‡¶∞‡¶õ‡ßá...";
    chat.appendChild(t);
  }else{
    document.getElementById("typing")?.remove();
  }
}

// Send message to OpenRouter API
async function sendMessage(){
  const input=document.getElementById("input");
  const text=input.value.trim();
  if(!text) return;
  addMessage(text,"user");
  input.value="";
  typing(true);

  try{
    const res=await fetch("https://openrouter.ai/api/v1/chat/completions",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":"Bearer "+API_KEY
      },
      body:JSON.stringify({
        model:"mistralai/mistral-7b-instruct",
        messages:[
          {role:"user", content:text}
        ]
      })
    });
    const data=await res.json();
    typing(false);
    addMessage(data.choices[0].message.content,"ai");
    saveChat();
  }catch(err){
    typing(false);
    addMessage("AI error: "+err,"ai");
  }
}

// Dark / Light toggle
function toggleTheme(){
  app.classList.toggle("dark");
  localStorage.theme=app.classList.contains("dark")?"dark":"light";
}

// Save chat
function saveChat(){
  localStorage.chat=chat.innerHTML;
}

// Load chat
function loadChat(){
  if(localStorage.chat) chat.innerHTML=localStorage.chat;
  if(localStorage.theme==="dark") app.classList.add("dark");
}

// Clear chat
function clearChat(){
  if(confirm("Chat clear ‡¶ï‡¶∞‡¶¨‡ßá‡¶®?")){
    chat.innerHTML="";
    localStorage.removeItem("chat");
  }
}

// Image AI (text description)
async function imageAI(){
  const prompt=prompt("Image prompt ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®:");
  if(!prompt) return;
  addMessage("üñºÔ∏è "+prompt,"user");
  typing(true);
  try{
    const res=await fetch("https://openrouter.ai/api/v1/chat/completions",{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":"Bearer "+API_KEY
      },
      body:JSON.stringify({
        model:"mistralai/mistral-7b-instruct",
        messages:[{role:"user",content:"Describe an image for: "+prompt}]
      })
    });
    const data=await res.json();
    typing(false);
    addMessage("üñºÔ∏è Image description:\n"+data.choices[0].message.content,"ai");
  }catch(err){
    typing(false);
    addMessage("Image AI error: "+err,"ai");
  }
}

loadChat();
</script>

</body>
</html>
